{{#if user}}
<div>
  <h2>Bienvenido <b class="font-bold">{{user.first_name}}, {{user.last_name}}</b> 
  (<a href="/profile">{{user.email}}</a>)- role: {{user.role}}
  </h2>
  <a href="/sessions/logout" class="button">Logout</a>
</div>
{{/if}}
<h2 class="text-2xl my-10 font-extrabold text-center">Lista Productos</h2>
  </fieldset>

<div class="mt-8 mx-auto place-items-start" >
  
  <div class="grid grid-cols-2  place-items-start">

    <fieldset class="p-4">
      {{#if productsAll.hasPrevPage}}      
        <a 
        class="
          bg-gray-300  
          hover:bg-gray-400 
          text-gray-800 
          font-semibold 
          py-2 px-4 
          cursor-pointer 
          rounded-l"
           href="http://localhost:8000/products?limit={{productsAll.limit}}&page={{productsAll.prevPage}}"
           {{!-- href="{{productsAll.prevLink}}"   --}}
        >
          Anterior
        </a>
      {{/if}}
      {{#each productsAll.totalPages}}
        <a href="{{this.link}}">{{this.page}}</a>
      {{/each}}
      {{#if productsAll.hasNextPage}}
      <a 
        class="
          bg-gray-300 
          checked:bg-green-400 
          hover:bg-gray-400 
          text-gray-800 
          font-semibold 
          py-2 px-4 
          cursor-pointer 
          rounded-l" 
          href="http://localhost:8000/products?limit={{productsAll.limit}}&page={{productsAll.nextPage}}"
          {{!-- href="{{productsAll.nextLink}}" --}}
      >
        Siguiente
      </a>

      {{/if}}
      
      </fieldset>
      <fieldset class="p-4">
        <a href="http://localhost:8000/products?limit={{productsAll.limit}}&page={{productsAll.page}}&sort=desc"
          class="bg-gray-300 checked:bg-green-400 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 cursor-pointer rounded-l">desc</a>
          <a href="http://localhost:8000/products?limit={{productsAll.limit}}&page={{productsAll.page}}&sort=asc"
          class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 cursor-pointer rounded-r">asc</a>
    
  </fieldset>
  </div>
</div>

  <section class="py-10 bg-gray-100">
    <div class="mx-auto grid max-w-6xl  grid-cols-1 gap-6 p-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      {{#each productsAll.payload}}
      <article class="rounded-xl bg-white p-3 shadow-lg hover:shadow-xl hover:transform hover:scale-105 duration-300 ">
        <a href="#">
          <div class="relative flex items-end overflow-hidden rounded-xl">
            <img
              src="https://images.unsplash.com/photo-1515955656352-a1fa3ffcd111?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
              alt="Hotel Photo" />
            <div
              class="flex items-center space-x-1.5 rounded-lg bg-blue-500 px-4 py-1.5 text-white duration-100 hover:bg-blue-600">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                class="h-4 w-4">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
              </svg>

              <button class="text-sm">Add to cart</button>
            </div>
          </div>

          <div class="mt-1 p-2">
            <h2 class="text-slate-700">Adobe Photoshop CC 2022</h2>
            <p class="mt-1 text-sm text-slate-400">Lisbon, Portugal</p>

            <div class="mt-3 flex items-end justify-between">
              <p class="text-lg font-bold text-blue-500">$850</p>

              <div
                class="flex items-center space-x-1.5 rounded-lg bg-blue-500 px-4 py-1.5 text-white duration-100 hover:bg-blue-600">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                  stroke="currentColor" class="h-4 w-4">
                  <path stroke-linecap="round" stroke-linejoin="round"
                    d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
                </svg>

                <button class="text-sm">Add to cart</button>
              </div>
            </div>
          </div>
        </a>
      </article>
      {{/each}}
    </div>
  </section>


<table class="shadow-lg mt-1 bg-white mx-auto max-w-md">
   
  <thead>
    <tr>
      <td class="bg-blue-100 border text-left px-8 py-4"><strong>Info </strong></td>
      <td class="bg-blue-100 border text-left px-8 py-4"><strong>Producto </strong></td>
      <td class="bg-blue-100 border text-left px-8 py-4"><strong>Descripcion</strong></td>
      <td class="bg-blue-100 border text-left px-8 py-4"><strong>Precio</strong></td>
      
      <td class="bg-blue-100 border text-left px-8 py-4"><strong>Stock</strong></td>
      <td class="bg-blue-100 border text-left px-8 py-4"><strong>Categoria</strong></td>
      <td class="bg-blue-100 border text-left px-8 py-4"><strong>Comprar</strong></td>
    </tr>
  </thead>
  <tbody>
    {{!-- {{#each products}} --}}
    {{#each productsAll.payload}}
    <tr>
      <td class="border px-8 py-4">
        <a class="bg-gray-300  hover:bg-teal-400 text-gray-700 font-semibold py-2 px-4 cursor-pointer rounded" href="http://localhost:8000/product/{{this._id}}">Ver</a> 
      </td>
      <td class="border px-8 py-4">           
        {{this.title}}
      </td>
      <td class="border px-8 py-4">{{this.description}}</td>
      <td class="border px-8 py-4">{{this.price}}</td>
      <td class="border px-8 py-4">{{this.stock}}</td>
      <td class="border px-8 py-4">{{this.category}}</td>
      <td class="border px-8 py-4"> 
        <button class="bg-gray-300 hover:bg-green-400 text-gray-700 font-bold py-2 px-2 rounded inline-flex items-center" onclick="addToCart(`{{this._id}}`)">
          <span>Agregar</span>
        </button>
      </td>
      {{!-- <td class="border px-8 py-4"> --}}
        {{!-- {{#each this.thumbnail}} --}}
        {{!-- <img src=" http://localhost:8000/img/{{this.filename}}" alt="{{this.filename}}" width="50" height="50"> --}}
        {{!-- <img src="../../src/public/img/nike.jpeg" alt="{{this.filename}}"> --}}
        {{!-- {{/each}} --}}
      {{!-- </td>       --}}
    </tr>
    {{/each}}  
    
  </tbody>   
</table>
<script src="/js/products.js"></script>